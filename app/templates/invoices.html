{% extends "base.html" %}
{% block title %}Invoices | Umvuzo Media{% endblock %}

{% block content %}
<h2>Invoices</h2>

<div class="table-wrapper">
<table>
<tr>
    <th>Invoice #</th>
    <th>Client</th>
    <th>Items</th>
    <th>Total (R)</th>
    <th>Status</th>
    <th>Date</th>
    <th>Actions</th>
</tr>

{% for invoice in invoices %}
<tr>
    <td>INV-{{ "%04d"|format(invoice.invoice_number) }}</td>
    <td>{{ invoice.client.name }}</td>
    <td>{{ invoice.items }}</td>
    <td>R {{ "%.2f"|format(invoice.total) }}</td>
    <td>{{ "PAID" if invoice.paid else "UNPAID" }}</td>
    <td>{{ invoice.created_at.strftime("%Y-%m-%d") }}</td>
    <td>
        <div class="actions">
            <a class="btn pdf" href="/invoices/{{ invoice.id }}/pdf">PDF</a>
            <a class="btn email" href="/invoices/{{ invoice.id }}/email">Email</a>
            {% if not invoice.paid %}
            <a class="btn mark" href="/invoices/{{ invoice.id }}/paid">Mark Paid</a>
            {% endif %}
        </div>
    </td>
</tr>
{% endfor %}
</table>
</div>
{% endblock %}
